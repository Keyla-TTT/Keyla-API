#!/bin/sh

export PATH="/usr/local/bin:$PATH"
export SBT_HOME="$HOME/.sbt"
export PATH="$SBT_HOME/bin:$PATH"

echo "Esecuzione pre-commit hooks..."

# Check Scalafmt
echo "Controllo formattazione codice..."
command -v sbt >/dev/null 2>&1 || {
    echo "sbt non trovato. Verifica che sia installato e nel PATH"
    exit 1
}

sbt scalafmtCheckAll || {
    echo "Scalafmt check fallito. Esegui 'sbt scalafmtAll' per formattare il codice."
    exit 1
}

# Check Scalafix
echo "Esecuzione Scalafix..."
sbt "scalafixAll --check" || {
    echo "Scalafix check fallito. Esegui 'sbt scalafixAll' per correggere i problemi."
    exit 1
}

echo "Pre-commit hooks completati con successo!"